@using ArizaKaydi.Models
@model WorkDetailModel

@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
	.table th,
	.table td {
		padding: 0.75rem;
		vertical-align: middle;
		border: 1px solid #dc3545;
	}

	.table th {
		background-color: #dc3545;
		color: #fff;
		border-color: #ffffff;
		text-align: left;
		font-weight: 600;
	}

	.table tbody tr:nth-child(even) {
		background-color: #f8d7da; /* Açık pembe */
	}

	.table tbody tr:hover {
		background-color: #f1b0b7; /* Hover efekti */
	}

	.table td {
		background-color: #fff;
		color: #dc3545;
		white-space: normal;
	}

	.aciklama-hucresi {
		/* max-width: 400px; */ /* Opsiyonel: Hücreye maksimum bir genişlik de atayabilirsiniz */
		overflow-wrap: break-word;
		white-space: normal;
		word-break: break-all;
	}
</style>

<div class="card-header border-0">
	<h3 class="mb-0">İş Raporu</h3>
</div>
<br />

<div class="table-responsive">
	<table class="table table-bordered">
		<tbody>
			<tr>
				<th scope="row">ID</th>
				<td>@Model.workInfo.id</td>
			</tr>
			<tr>
				<th scope="row">İş Emri ID</th>
				<td>@Model.workInfo.workOrderId</td>
			</tr>
			<tr>
				<th scope="row">Makine</th>
				<td>@(Model.workInfo?.machine?.name ?? "Makine bilgisi yok.") </td>
			</tr>
			<tr>
				<th scope="row">Makine Parçası</th>
				<td>@(Model.workInfo?.machinePart?.name ?? "Makine parçası bilgisi yok.")</td>
			</tr>workInfo
			<tr>
				<th scope="row">İşi Alan</th>
				<td>@(Model.workInfo.userI?.UserName ?? "İşi alan kaydı silindi")</td>
			</tr>
			<tr>
				<th scope="row">Rapor Başlığı</th>
				<td>@Model.workInfo.title</td>
			</tr>
			<tr>
				<th scope="row"> Rapor Açıklama</th>
				<td class="aciklama-hucresi">@Model.workInfo.desc</td>
			</tr>
			<tr>
				<th scope="row">İş emri başlangıç tarihi</th>
				<td>@(Model.workInfo?.workOrderStartDate?.ToString("dd-MM-yyyy HH:mm:ss") ?? "Başlangıç tarihi bilgisi yok.")</td>
			</tr>
			<tr>
				<th scope="row">İş emri tamamlama tarihi</th>
				<td>@(Model.workInfo?.workOrderEndDate?.ToString("dd-MM-yyyy HH:mm:ss") ?? "Tamamlama tarihi bilgisi yok.")</td>
			</tr>

			<tr>
				<th scope="row">Çekilen Resimler</th>
				<td>
					@if (Model.collection != null && Model.collection.Count > 0)
					{
						<h5>İş Fotoğrafları</h5>
						@foreach (var i in Model.collection)
						{
							<a href="#" data-bs-toggle="modal" data-bs-target="#imageModal" onclick="changeModalImage('@i')">
								<img src="@i" alt="Arıza Fotoğrafı" class="thumbnail-img m-2" onclick="openImage('@i')" />
							</a>
						}
					}

				</td>
			</tr>
		</tbody>
	</table>
</div>

<div class="d-flex justify-content-center mt-3">
	@* <a href="/Work/EditWork/@Model.workInfo.id" class="btn btn-outline-warning mx-2">Düzenle</a> *@
	<a href="/Errors/DeleteWork/@Model.workInfo.id" class="btn btn-outline-danger mx-2">Sil</a>
</div>



<!-- Bootstrap Modal -->
<div id="lightbox" class="lightbox" onclick="closeImage()">
	<img id="lightbox-img" class="lightbox-img" src="" alt="Büyütülmüş Fotoğraf">
</div>

<style>
	/* Küçük resimlerin görünümü */
	.thumbnail-img {
		width: 150px !important;
		height: 150px !important;
		object-fit: cover;
		cursor: pointer;
		border-radius: 10px;
		transition: transform 0.3s ease;
	}

		.thumbnail-img:hover {
			transform: scale(1.05);
		}

	/* Lightbox için tam ekran efekti */
	.lightbox {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.8);
		display: none;
		justify-content: center;
		align-items: center;
		z-index: 9999;
		animation: fadeIn 0.3s ease;
	}

	.lightbox-img {
		max-width: 90%;
		max-height: 90%;
		border-radius: 10px;
		box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.5);
		animation: zoomIn 0.3s ease;
	}

	/* Açılma animasyonu */
	@@keyframes zoomIn {
		from {
			transform: scale(0.5);
			opacity: 0;
		}

		to {
			transform: scale(1);
			opacity: 1;
		}
	}

	@@keyframes fadeIn {
		from {
			opacity: 0;
		}

		to {
			opacity: 1;
		}
	}
</style>

<script>
	function openImage(imageSrc) {
		document.getElementById("lightbox-img").src = imageSrc;
		document.getElementById("lightbox").style.display = "flex";
	}

	function closeImage() {
		document.getElementById("lightbox").style.display = "none";
	}

</script>

